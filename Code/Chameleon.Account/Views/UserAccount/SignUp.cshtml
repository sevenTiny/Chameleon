@{
    Layout = null;
}
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Login Page - Now UI Kit by Creative Tim</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <link href="~/lib/login/bootstrap.min.css" rel="stylesheet" />
    <link href="~/lib/login/fonts.googleapis.com.family.montserrat.css" rel="stylesheet" />
    <link href="~/lib/login/now-ui-kit.css" rel="stylesheet" />
</head>
<body class="login-page sidebar-collapse">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-primary fixed-top navbar-transparent " color-on-scroll="400">
        <div class="container">
            <div class="collapse navbar-collapse justify-content-end" data-nav-image="./img/blurred-image-1.jpg">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#">首页</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/UserAccount/SignUp">注册账号</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    <!-- <div class="page-header" filter-color="orange"> -->
    <div class="page-header">
        <div id="div_background" class="page-header-image" style="background-image:url(/lib/login/1.jpg)"></div>
        <div class="container">
            <div class="col-md-4 content-center">
                <div class="card card-login card-plain">
                    <form class="form" method="" action="">
                        <div class="header header-primary text-center">
                            <div class="logo-container">
                                <img src="./now-logo.png" alt="">
                            </div>
                        </div>
                        <div class="content">
                            <div class="input-group form-group-no-border input-lg">
                                <span class="input-group-addon">
                                    <i class="now-ui-icons users_circle-08"></i>
                                </span>
                                <input id="ipt_name" type="text" class="form-control" placeholder="name">
                            </div>
                            <div class="input-group form-group-no-border input-lg">
                                <span class="input-group-addon">
                                    <i class="now-ui-icons users_circle-08"></i>
                                </span>
                                <input id="ipt_email" type="email" class="form-control" placeholder="email">
                            </div>
                            <div class="input-group form-group-no-border input-lg">
                                <span class="input-group-addon">
                                    <i class="now-ui-icons text_caps-small"></i>
                                </span>
                                <input id="ipt_password" type="password" placeholder="password" class="form-control" />
                            </div>
                            <div class="input-group form-group-no-border input-lg">
                                <span id="errorMsg"
                                      style="margin-left:auto;margin-right: auto; text-align: center;"></span>
                            </div>
                        </div>
                        <div class="footer text-center">
                            <a id="btn_signIn" href="javascript:signIn()"
                               class="btn btn-primary btn-round btn-lg btn-block">注册</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <nav>
                    <ul>
                        <li>
                            <a href="#">
                                Creative Tim
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                About Us
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Blog
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                MIT License
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="copyright">
                    &copy;
                    <script>
                        document.write(new Date().getFullYear())
                    </script>, Designed by 7tiny.
                </div>
            </div>
        </footer>
    </div>
    <script src="~/js/jquery-1.11.3.min.js"></script>
    <script>
        $(document).ready(function () {
            //随机切换背景图片的特效
            var now = new Date();
            if (now % 3 === 1) {
                $("#div_background").css("background-image", "url(/lib/login/1.jpg)")
            } else if (now % 3 === 2) {
                $("#div_background").css("background-image", "url(/lib/login/2.jpg)")
            } else {
                $("#div_background").css("background-image", "url(/lib/login/3.jpg)")
            }
        });

        function clearErrorMsg() {
            $("#errorMsg").html("")
        }

        function errorMsg(msg) {
            $("#errorMsg").html(msg)
        }

        function disableSignInBtn() {
            $('#btn_signIn').attr("disabled", true);
            $('#btn_signIn').attr("href", "#");
        }

        function enableSignInBtn() {
            $('#btn_signIn').attr("disabled", false);
            $('#btn_signIn').attr("href", "javascript:signIn()");
        }

        function signIn() {
            clearErrorMsg()

            var name = $("#ipt_name").val()
            var email = $("#ipt_email").val()
            var password = $("#ipt_password").val()

            if (name == null || name == '') {
                errorMsg('请输入用户名')
                return;
            }
            if (email == null || email == '') {
                errorMsg('请输入邮箱')
                return;
            }
            if (password == null || password == '') {
                errorMsg('请输入密码')
                return;
            }

            disableSignInBtn()

            $.ajax({
                type: 'POST',
                url: '/UserAccount/SignUpLogic?redirect=@ViewData["Redirect"]',
                dataType: 'json',
                data: {
                    'Name': name,
                    'Email': email,
                    'Password': password
                },
                success: function (data) {
                    if (data.isSuccess) {
                        var cutdown = 2;
                        var timmer = null
                        timmer = setInterval(function () {
                            cutdown--
                            $("#btn_signIn").html("注册成功，正在跳转...(" + cutdown + ")")
                            if (cutdown <= 0) {
                                clearInterval(timmer)
                                window.location = data.data
                            }
                        },1000)
                    } else {
                        errorMsg(data.message);
                        enableSignInBtn()
                    }
                },
                error: function (data) {
                    errorMsg(data.message);
                    enableSignInBtn()
                },
            });
        }
    </script>
</body>
</html>