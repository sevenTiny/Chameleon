@using Chameleon.Entity;
@using Chameleon.Infrastructure.Consts;
@using Chameleon.Infrastructure.Configs;
@{
    ViewData["Title"] = "Detail";
    Layout = "~/Views/Shared/_LayoutHeaderStyle.cshtml";
    string applicationCode = Convert.ToString(ViewData["ApplicationCode"]);
    string applicationId = Convert.ToString(ViewData["ApplicationId"]);
    var metaObjectList = ViewData["MetaObjects"] as List<MetaObject> ?? new List<MetaObject>();
}

<header class="navbar-wrapper">
    <div class="navbar navbar-fixed-top">
        <div class="container-fluid cl">
            <a aria-hidden="false" class="nav-toggle Hui-iconfont visible-xs" href="javascript:;">&#xe667;</a>
            <nav class="nav navbar-nav">
                <ul class="cl">
                    <li><a href="/Home/Index" class="dropDown_A">应用：@applicationCode </a></li>
                    <li class="navbar-levelone"><a href="javascript:mainFrameOpen('/Home/Welcome?applicationId=@applicationId')">应用设置</a></li>
                    <li class="navbar-levelone current"><a href="javascript:mainFrameOpen('/MetaObject/List?applicationId=@applicationId')">应用对象管理</a></li>
                </ul>
            </nav>
            <nav id="Hui-userbar" class="nav navbar-nav navbar-userbar hidden-xs">
                <ul class="cl">
                    <li>欢迎您，@ViewData["UserRole"] </li>
                    <li class="dropDown dropDown_hover">
                        <a href="#" class="dropDown_A"> @ViewData["UserName"] <i class="Hui-iconfont">&#xe6d5;</i></a>
                        <ul class="dropDown-menu menu radius box-shadow">
                            <li><a href="/System/Log" target="_blank">查看日志</a></li>
                            <li><a href="/CloudApplication/List">应用管理</a></li>
                            <li><a href="@UrlsConfig.Instance.Account" target="_blank">后台管理系统</a></li>
                            <li><a href="@UrlsConfig.Instance.Office" target="_blank">前台首页</a></li>
                            <li><a href="@AccountConst.SwitchDevelopmentAccountUrl">切换账户</a></li>
                            <li><a href="@AccountConst.SignOutDevelopmentUrl">退出</a></li>
                        </ul>
                    </li>
                    <li id="Hui-msg"> <a href="#" title="消息"><span class="badge badge-danger">1</span><i class="Hui-iconfont" style="font-size:18px">&#xe68a;</i></a> </li>
                    <li id="Hui-skin" class="dropDown right dropDown_hover">
                        <a href="javascript:;" class="dropDown_A" title="换肤"><i class="Hui-iconfont" style="font-size:18px">&#xe62a;</i></a>
                        <ul class="dropDown-menu menu radius box-shadow">
                            <li><a href="javascript:;" data-val="default" title="默认（黑色）">默认（黑色）</a></li>
                            <li><a href="javascript:;" data-val="blue" title="蓝色">蓝色</a></li>
                            <li><a href="javascript:;" data-val="green" title="绿色">绿色</a></li>
                            <li><a href="javascript:;" data-val="red" title="红色">红色</a></li>
                            <li><a href="javascript:;" data-val="yellow" title="黄色">黄色</a></li>
                            <li><a href="javascript:;" data-val="orange" title="橙色">橙色</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<aside class="Hui-aside">
    <div class="menu_dropdown bk_2">
        <dl id="menu-authentication">
            <dt><i class="Hui-iconfont">&#xe602; </i> 应用权限<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
            <dd>
                <ul>
                    <li><a href="javascript:mainFrameOpen('/CloudApplicationPermission/List')"><i class="Hui-iconfont">&#xe63c;</i> 权限管理</a></li>
                </ul>
            </dd>
        </dl>
        <dl id="menu-authentication">
            <dt><i class="Hui-iconfont">&#xe6f1; </i> 应用接口<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
            <dd>
                <ul>
                    <li><a href="javascript:mainFrameOpen('/DataSource/DynamicScriptTriggerList')"><i class="Hui-iconfont">&#xe6ee;</i> 动态脚本</a></li>
                    <li><a href="javascript:mainFrameOpen('/DataSource/JsonDataSourceList')"><i class="Hui-iconfont">&#xe6d2;</i> Json</a></li>
                    <li><a href="javascript:mainFrameOpen('/DataSource/#')"><i class="Hui-iconfont">&#xe641;</i> 文件上传下载</a></li>
                    <li><a href="javascript:mainFrameOpen('/Home/Abount')"><i class="Hui-iconfont">&#xe6a2;</i> 应用接口触发器</a></li>
                </ul>
            </dd>
        </dl>
        <dl id="menu-picture">
            <dt><i class="Hui-iconfont">&#xe603; </i> 应用发布<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
            <dd>
                <ul>
                    <li><a href="javascript:mainFrameOpen('/CloudApplicationDeploy/Export')"><i class="Hui-iconfont">&#xe644;</i> 数据导出</a></li>
                    <li><a href="javascript:mainFrameOpen('/CloudApplicationDeploy/Import')"><i class="Hui-iconfont">&#xe645;</i> 数据导入</a></li>
                </ul>
            </dd>
        </dl>
    </div>
    <div class="menu_dropdown bk_1">
        @foreach (var item in metaObjectList)
        {
            <dl id="menu-article">
                <dt title="@item.Name"><i class="Hui-iconfont">&#xe72d;</i> @item.Name.Substring(0, item.Name.Length <= 9 ? item.Name.Length : 9)<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
                <dd>
                    <ul>
                        <li><a href="javascript:mainFrameOpen('/MetaField/List?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe6ec;</i> 字段</a></li>
                        <li><a href="javascript:mainFrameOpen('/InterfaceFields/List?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe627;</i> 接口字段</a></li>
                        <li><a href="javascript:mainFrameOpen('/InterfaceCondition/List?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe665;</i> 接口条件</a></li>
                        <li><a href="javascript:mainFrameOpen('/InterfaceVerification/List?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe676;</i> 接口校验</a></li>
                        <li><a href="javascript:mainFrameOpen('/InterfaceSort/List?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe675;</i> 接口排序</a></li>
                        <li><a href="javascript:mainFrameOpen('/InterfaceSetting/MetaObjectInterfaceList?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe61d;</i> 接口配置</a></li>
                        <li><a href="javascript:mainFrameOpen('/TriggerScript/MetaObjectTriggerList?metaObjectId=@item.Id&metaObjectCode=@item.Code')"><i class="Hui-iconfont">&#xe6a2;</i> 触发器</a></li>
                    </ul>
                </dd>
            </dl>
        }
    </div>
</aside>
<div class="dislpayArrow hidden-xs"><a class="pngfix" href="javascript:void(0);" onClick="displaynavbar(this)"></a></div>

<section class="Hui-article-box">
    <article class="cl pd-20">
        <div class="show_iframe" style="margin-bottom:50px;">
            <div style="display:none" class="loading"></div>
            <iframe id="main_iframe" scrolling="auto" frameborder="0" src="/MetaObject/List?applicationId=@applicationId&applicationCode=@applicationCode"></iframe>
        </div>
    </article>
</section>

@await Html.PartialAsync($"~/Views/Shared/_FooterScripts.cshtml")
@await Html.PartialAsync($"~/Views/Shared/_CommonScript.cshtml")
<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript">
    //头部控件切换
    $(function () {
        $("body").Huitab({
            tabBar: ".navbar-wrapper .navbar-levelone",
            tabCon: ".Hui-aside .menu_dropdown",
            className: "current",
            index: 1,
        });
    });

    //在frame中打开页面
    function mainFrameOpen(url) {
        $("#main_iframe").prop("src", url);
    }
</script>
<!--/请在上方写此页面业务相关的脚本-->